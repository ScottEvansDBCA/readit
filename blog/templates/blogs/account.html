{% extends "blogs/base.html" %}
{% block content %}
    <div class="container" style="margin-top:2%;">
        {% if user.is_authenticated %}
            <a href="{% url 'blog:profile_view' %}" style="position:fixed;bottom:10px;right:80px;"><i class="fas fa-user-circle fa-4x"></i></a>
            <a href="{% url 'blog:new_post' %}"style="position:fixed;bottom:10px;right:10px;" ><i class="fas fa-pen-square fa-4x"></i></a>
            <h1 style="text-align:center;">Welcome, {{ user.get_username }}.</h1>

            {% if posts.count == 1 %}
                <p>You have 1 post.</p>
                
            {% else %}
                <p>You have {{ posts.count }} posts.</p>
            {% endif %}
            <table style="width:100%; border: 1px solid black;">
                    <tr>
                        <th style="border: 1px solid black;">Post Title</th>
                        <th style="border: 1px solid black;">Date Created</th>
                        <th style="border: 1px solid black;">Categories</th>
                        <th style="border: 1px solid black;">Edit</th>
                    </tr>
                    {% for post in posts %}
                        <tr>
                            <td style="border: 1px solid black;"><a href="{% url 'blog:detail' post.id %}">{{ post.title }}</a></td>
                            <td style="border: 1px solid black;">{{ post.create_date }}</td>
                            <td style="border: 1px solid black;">{% for category in post.categories.all %}
                                <a href="{% url 'blog:category' category.id %}" >{{ category.name|title }} </a>,
                                {% endfor %}</td>
                            <td style="border: 1px solid black;" align="center"><a href="{% url 'blog:edit' pk=post.pk %}" style="color:grey"><i class="fas fa-edit fa-sm"></i></a></td>
                        </tr>
                    {% endfor %}
                </table>
        {% else %}
            <a href={% url 'blog:login' %}>Log in</a>
        {% endif %}
    </div>
{% endblock %}